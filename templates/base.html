{% load static i18n share_image raven %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>GeoPuzzle - {% trans 'Mercator puzzle of ' %}{% block title %}{% trans 'World' %}{% endblock %}</title>
    <meta name="description" content="{% trans 'Arrange the pieces of the world!' %}"/>
    <meta name="keywords" content="geopuzzle, геопаззл, mercator puzzle, паззл меркатора"/>
    <meta name="viewport" content="initial-scale=1, user-scalable=no, width=device-width"/>
    <meta charset="utf-8">
    <meta name="application-name" content="GeoPuzzle">
    <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}" />

    {% share_image request game %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}">
    {% block head_js %}
        <script src="https://browser.sentry-cdn.com/5.3.0/bundle.min.js" crossorigin="anonymous"></script>
        <script>
          window.__LANGUAGE__ = '{{ request.LANGUAGE_CODE }}';
          window.__STATIC_URL__ = '{{ settings.STATIC_URL }}';
          Sentry.init({
            dsn: 'https://e905309fa6504c92bbfd9becc0ad1010@sentry.io/260019',
            release: '{{ settings.GIT_REVISION }}',
          });
        </script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    {% endblock %}
    {% block extra_css %}
    {% endblock %}
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light menu">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarToggler">
    <a class="navbar-brand" href="/">GeoPuzzle</a>
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item">
        <a class="nav-link" href="/">{% trans 'Home' %}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'workshop' %}">{% trans 'Workshop' %}</a>
      </li>
      <li class="donate-button nav-item mx-2">
        <iframe src="https://money.yandex.ru/quickpay/button-widget?targets=GeoPuzzle&default-sum=100&button-text=11&any-card-payment-type=on&button-size=m&button-color=orange&successURL=&quickpay=small&account=410012053429083&" width="184" height="36" frameborder="0" allowtransparency="true" scrolling="no"></iframe>
      </li>
      <li class="donate-button nav-item mx-2">
        <a href="https://www.paypal.me/tyvik" target="_blank" style="padding: 0"><img style="vertical-align: baseline" height="36px" src="https://i1.wp.com/www.lotus-happiness.com/wp-content/uploads/2015/11/Paypal-Donate-300x136.png?fit=300%2C136&ssl=1" alt="donate"></a>
      </li>
      <li class="donate-button nav-item mx-2">
        <iframe src="https://www.patreon.com/platform/iframe?widget=become-patron-button&amp;redirectURI=http%3A%2F%2F127.0.0.1%3A8002%2Fpuzzle%2Fworkshop%2F&amp;creatorID=11576139" scrolling="no" allowtransparency="true" frameborder="0" class="patreon-widget" title="Patreon Widget" style="position: static; visibility: visible; height: 35px;"></iframe>
      </li>
    </ul>
    <ul class="nav navbar-nav ">
        {% if request.user.is_authenticated %}
            <li class="nav-item"><a class="nav-link" href="{% url "profile" %}">@{{ request.user.username }}</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">({% trans 'logout' %})</a></li>
        {% else %}
            <li class="nav-item"><a class="nav-link" href="{% url "login" %}">{% trans "Sign In" %}</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url "registration" %}">{% trans "Sign Up" %}</a></li>
        {% endif %}
    </ul>
  </div>
</nav>

{% block content %}
{% endblock %}

{% block extra_js %}
{% endblock %}

<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '1273749826026102',
            xfbml: true,
            version: 'v2.9'
        });
        FB.AppEvents.logPageView();
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<script defer src="https://c6.patreon.com/becomePatronButton.bundle.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

{% if not debug %}
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function () {
                try {
                    w.yaCounter42253364 = new Ya.Metrika({
                        id: 42253364,
                        clickmap: true,
                        trackLinks: true,
                        accurateTrackBounce: true,
                        webvisor: true
                    });
                } catch (e) {
                }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () {
                    n.parentNode.insertBefore(s, n);
                };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else {
                f();
            }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-93687529-1', 'auto');
      ga('send', 'pageview');

    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/42253364" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
{% endif %}
</body>
</html>
